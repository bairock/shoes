{"version":3,"sources":["App.js","index.js"],"names":["state","proxy","current","items","laces","mesh","caps","inner","sole","stripes","band","patch","rus","Shoe","ref","useRef","snap","useProxy","useGLTF","nodes","materials","useFrame","t","clock","getElapsedTime","rotation","z","Math","sin","x","cos","y","position","useState","hovered","set","useEffect","cursor","unescape","encodeURIComponent","document","body","style","btoa","dispose","onPointerOver","e","stopPropagation","object","material","name","onPointerOut","intersections","length","onPointerMissed","onPointerDown","geometry","shoe","material-color","shoe_1","shoe_2","shoe_3","shoe_4","shoe_5","shoe_6","shoe_7","Picker","display","className","color","onChange","App","concurrent","pixelRatio","camera","intensity","angle","penumbra","fallback","Environment","files","ContactShadows","rotation-x","PI","opacity","width","height","blur","far","OrbitControls","minPolarAngle","maxPolarAngle","enableZoom","enablePan","ReactDOM","render","getElementById"],"mappings":"0OAMMA,EAAQC,YAAM,CAClBC,QAAS,KACTC,MAAO,CACLC,MAAO,UACPC,KAAM,UACNC,KAAM,UACNC,MAAO,UACPC,KAAM,UACNC,QAAS,UACTC,KAAM,UACNC,MAAO,aAILC,EAAM,CACVR,MAAO,uCACPC,KAAM,uCACNC,KAAM,mDACNC,MAAO,yDACPC,KAAM,6CACNC,QAAS,6CACTC,KAAM,iCACNC,MAAO,wCAGT,SAASE,IACP,IAAMC,EAAMC,mBACNC,EAAOC,YAASjB,GAFR,EAGekB,YAAQ,yBAA7BC,EAHM,EAGNA,MAAOC,EAHD,EAGCA,UAEfC,aAAS,SAACrB,GACR,IAAMsB,EAAItB,EAAMuB,MAAMC,iBACtBV,EAAIZ,QAAQuB,SAASC,GAAK,IAAO,EAAIC,KAAKC,IAAIN,EAAI,MAAQ,GAC1DR,EAAIZ,QAAQuB,SAASI,EAAIF,KAAKG,IAAIR,EAAI,GAAK,EAC3CR,EAAIZ,QAAQuB,SAASM,EAAIJ,KAAKC,IAAIN,EAAI,GAAK,EAC3CR,EAAIZ,QAAQ8B,SAASD,GAAK,EAAIJ,KAAKC,IAAIN,EAAI,MAAQ,MAVvC,MAaSW,mBAAS,MAblB,mBAaPC,EAbO,KAaEC,EAbF,KAoBd,OANAC,qBAAU,WACR,IAAMC,EAAM,yYAAqYrB,EAAKb,MAAM+B,GAAhZ,+MAA+lBI,SAASC,mBAAmB3B,EAAIsB,KAA/nB,0nBAEZM,SAASC,KAAKC,MAAML,OAApB,yCAA+DM,KAAKT,EAAUG,EADpE,yRACV,cACC,CAACH,IAGF,wBACEpB,IAAKA,EACL8B,QAAS,KACTC,cAAe,SAACC,GAAD,OAAQA,EAAEC,kBAAmBZ,EAAIW,EAAEE,OAAOC,SAASC,OAClEC,aAAc,SAACL,GAAD,OAAkC,IAA3BA,EAAEM,cAAcC,QAAgBlB,EAAI,OACzDmB,gBAAiB,kBAAOtD,EAAME,QAAU,MACxCqD,cAAe,SAACT,GAAD,OAAQA,EAAEC,kBAAoB/C,EAAME,QAAU4C,EAAEE,OAAOC,SAASC,MANjF,UAOE,sBAAMM,SAAUrC,EAAMsC,KAAKD,SAAUP,SAAU7B,EAAUhB,MAAOsD,iBAAgB1C,EAAKb,MAAMC,QAC3F,sBAAMoD,SAAUrC,EAAMwC,OAAOH,SAAUP,SAAU7B,EAAUf,KAAMqD,iBAAgB1C,EAAKb,MAAME,OAC5F,sBAAMmD,SAAUrC,EAAMyC,OAAOJ,SAAUP,SAAU7B,EAAUd,KAAMoD,iBAAgB1C,EAAKb,MAAMG,OAC5F,sBAAMkD,SAAUrC,EAAM0C,OAAOL,SAAUP,SAAU7B,EAAUb,MAAOmD,iBAAgB1C,EAAKb,MAAMI,QAC7F,sBAAMiD,SAAUrC,EAAM2C,OAAON,SAAUP,SAAU7B,EAAUZ,KAAMkD,iBAAgB1C,EAAKb,MAAMK,OAC5F,sBAAMgD,SAAUrC,EAAM4C,OAAOP,SAAUP,SAAU7B,EAAUX,QAASiD,iBAAgB1C,EAAKb,MAAMM,UAC/F,sBAAM+C,SAAUrC,EAAM6C,OAAOR,SAAUP,SAAU7B,EAAUV,KAAMgD,iBAAgB1C,EAAKb,MAAMO,OAC5F,sBAAM8C,SAAUrC,EAAM8C,OAAOT,SAAUP,SAAU7B,EAAUT,MAAO+C,iBAAgB1C,EAAKb,MAAMQ,WAKnG,SAASuD,IACP,IAAMlD,EAAOC,YAASjB,GACtB,OACE,sBAAK0C,MAAO,CAAEyB,QAASnD,EAAKd,QAAU,QAAU,QAAhD,UACE,cAAC,IAAD,CAAgBkE,UAAU,SAASC,MAAOrD,EAAKb,MAAMa,EAAKd,SAAUoE,SAAU,SAACD,GAAD,OAAYrE,EAAMG,MAAMa,EAAKd,SAAWmE,KACtH,6BAAKzD,EAAII,EAAKd,cAKL,SAASqE,IACtB,OACE,qCACE,eAAC,IAAD,CAAQC,YAAU,EAACC,WAAY,CAAC,EAAG,KAAMC,OAAQ,CAAE1C,SAAU,CAAC,EAAG,EAAG,OAApE,UACE,8BAAc2C,UAAW,KACzB,2BAAWA,UAAW,GAAKC,MAAO,GAAKC,SAAU,EAAG7C,SAAU,CAAC,EAAG,GAAI,MACtE,eAAC,WAAD,CAAU8C,SAAU,KAApB,UACE,cAACjE,EAAD,IACA,cAACkE,EAAA,EAAD,CAAaC,MAAM,2BACnB,cAACC,EAAA,EAAD,CAAgBC,aAAYvD,KAAKwD,GAAK,EAAGnD,SAAU,CAAC,GAAI,GAAK,GAAIoD,QAAS,IAAMC,MAAO,GAAIC,OAAQ,GAAIC,KAAM,EAAGC,IAAK,OAEvH,cAACC,EAAA,EAAD,CAAeC,cAAe/D,KAAKwD,GAAK,EAAGQ,cAAehE,KAAKwD,GAAK,EAAGS,YAAY,EAAOC,WAAW,OAEvG,cAAC3B,EAAD,OCxFN4B,IAASC,OAAO,cAACxB,EAAD,IAAS/B,SAASwD,eAAe,W","file":"static/js/main.0c3fd67e.chunk.js","sourcesContent":["import React, { Suspense, useRef, useState, useEffect } from 'react'\nimport { Canvas, useFrame } from 'react-three-fiber'\nimport { ContactShadows, Environment, useGLTF, OrbitControls } from 'drei'\nimport { HexColorPicker } from 'react-colorful'\nimport { proxy, useProxy } from 'valtio'\n\nconst state = proxy({\n  current: null,\n  items: {\n    laces: '#ffffff',\n    mesh: '#ffffff',\n    caps: '#ffffff',\n    inner: '#ffffff',\n    sole: '#ffffff',\n    stripes: '#ffffff',\n    band: '#ffffff',\n    patch: '#ffffff',\n  },\n})\n\nconst rus = {\n  laces: 'шнурок',\n  mesh: 'основа',\n  caps: 'колпачок',\n  inner: 'подкладка',\n  sole: 'подошва',\n  stripes: 'полоска',\n  band: 'лента',\n  patch: 'задник',\n}\n\nfunction Shoe() {\n  const ref = useRef()\n  const snap = useProxy(state)\n  const { nodes, materials } = useGLTF('/shoes/shoe-draco.glb')\n\n  useFrame((state) => {\n    const t = state.clock.getElapsedTime()\n    ref.current.rotation.z = -0.2 - (1 + Math.sin(t / 1.5)) / 20\n    ref.current.rotation.x = Math.cos(t / 4) / 8\n    ref.current.rotation.y = Math.sin(t / 4) / 8\n    ref.current.position.y = (1 + Math.sin(t / 1.5)) / 10\n  })\n\n  const [hovered, set] = useState(null)\n  useEffect(() => {\n    const cursor = `<svg width=\"64\" height=\"64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><g clip-path=\"url(#clip0)\"><path fill=\"rgba(255, 255, 255, 0.5)\" d=\"M29.5 54C43.031 54 54 43.031 54 29.5S43.031 5 29.5 5 5 15.969 5 29.5 15.969 54 29.5 54z\" stroke=\"#000\"/><g filter=\"url(#filter0_d)\"><path d=\"M29.5 47C39.165 47 47 39.165 47 29.5S39.165 12 29.5 12 12 19.835 12 29.5 19.835 47 29.5 47z\" fill=\"${snap.items[hovered]}\"/></g><path d=\"M2 2l11 2.947L4.947 13 2 2z\" fill=\"#000\"/><text fill=\"#000\" style=\"white-space:pre\" font-family=\"Inter var, sans-serif\" font-size=\"11\" letter-spacing=\"-.06em\"><tspan x=\"12\" y=\"63\">${unescape(encodeURIComponent(rus[hovered]))}</tspan></text></g><defs><clipPath id=\"clip0\"><path fill=\"#fff\" d=\"M0 0h64v64H0z\"/></clipPath><filter id=\"filter0_d\" x=\"6\" y=\"8\" width=\"47\" height=\"47\" filterUnits=\"userSpaceOnUse\" color-interpolation-filters=\"sRGB\"><feFlood flood-opacity=\"0\" result=\"BackgroundImageFix\"/><feColorMatrix in=\"SourceAlpha\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\"/><feOffset dy=\"2\"/><feGaussianBlur stdDeviation=\"3\"/><feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0\"/><feBlend in2=\"BackgroundImageFix\" result=\"effect1_dropShadow\"/><feBlend in=\"SourceGraphic\" in2=\"effect1_dropShadow\" result=\"shape\"/></filter></defs></svg>`\n    const auto = `<svg width=\"64\" height=\"64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"rgba(255, 255, 255, 0.5)\" d=\"M29.5 54C43.031 54 54 43.031 54 29.5S43.031 5 29.5 5 5 15.969 5 29.5 15.969 54 29.5 54z\" stroke=\"#000\"/><path d=\"M2 2l11 2.947L4.947 13 2 2z\" fill=\"#000\"/></svg>`\n    document.body.style.cursor = `url('data:image/svg+xml;base64,${btoa(hovered ? cursor : auto)}'), auto`\n  }, [hovered])\n\n  return (\n    <group\n      ref={ref}\n      dispose={null}\n      onPointerOver={(e) => (e.stopPropagation(), set(e.object.material.name))}\n      onPointerOut={(e) => e.intersections.length === 0 && set(null)}\n      onPointerMissed={() => (state.current = null)}\n      onPointerDown={(e) => (e.stopPropagation(), (state.current = e.object.material.name))}>\n      <mesh geometry={nodes.shoe.geometry} material={materials.laces} material-color={snap.items.laces} />\n      <mesh geometry={nodes.shoe_1.geometry} material={materials.mesh} material-color={snap.items.mesh} />\n      <mesh geometry={nodes.shoe_2.geometry} material={materials.caps} material-color={snap.items.caps} />\n      <mesh geometry={nodes.shoe_3.geometry} material={materials.inner} material-color={snap.items.inner} />\n      <mesh geometry={nodes.shoe_4.geometry} material={materials.sole} material-color={snap.items.sole} />\n      <mesh geometry={nodes.shoe_5.geometry} material={materials.stripes} material-color={snap.items.stripes} />\n      <mesh geometry={nodes.shoe_6.geometry} material={materials.band} material-color={snap.items.band} />\n      <mesh geometry={nodes.shoe_7.geometry} material={materials.patch} material-color={snap.items.patch} />\n    </group>\n  )\n}\n\nfunction Picker() {\n  const snap = useProxy(state)\n  return (\n    <div style={{ display: snap.current ? 'block' : 'none' }}>\n      <HexColorPicker className='picker' color={snap.items[snap.current]} onChange={(color) => (state.items[snap.current] = color)} />\n      <h1>{rus[snap.current]}</h1>\n    </div>\n  )\n}\n\nexport default function App() {\n  return (\n    <>\n      <Canvas concurrent pixelRatio={[1, 1.5]} camera={{ position: [0, 0, 2.75] }}>\n        <ambientLight intensity={0.3} />\n        <spotLight intensity={0.3} angle={0.1} penumbra={1} position={[5, 25, 20]} />\n        <Suspense fallback={null}>\n          <Shoe />\n          <Environment files='royal_esplanade_1k.hdr' />\n          <ContactShadows rotation-x={Math.PI / 2} position={[0, -0.8, 0]} opacity={0.25} width={10} height={10} blur={2} far={1} />\n        </Suspense>\n        <OrbitControls minPolarAngle={Math.PI / 2} maxPolarAngle={Math.PI / 2} enableZoom={false} enablePan={false} />\n      </Canvas>\n      <Picker />\n    </>\n  )\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './styles.css'\nimport 'react-colorful/dist/index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}